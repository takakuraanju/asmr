import{u as P,r as S,a as B,w as L,o as y,c as x,b as t,d as r,e as d,t as i,f as l,g as v,p as O,h as A}from"./index-cd727391.js";import{E as M,a as q}from"./el-row-6c2df5f3.js";import{E as R,a as $}from"./el-message-dd660b86.js";import{E as F}from"./el-link-b2e05f76.js";import{E as z}from"./el-button-c450cffe.js";import{E as D}from"./el-input-36601334.js";import{u as G,a as H}from"./user-3bb1cb92.js";import{u as U,l as V}from"./index-5e133581.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import{E as w}from"./request-7dd205cb.js";import"./index-87008c54.js";import"./error-f1912ce6.js";import"./_Uint8Array-c8893054.js";import"./index-44440405.js";const J="/assets/logo-9501de6f.png",K="/assets/t-3ef12def.png";const E=c=>(O("data-v-efbf71e8"),c=c(),A(),c),Q=E(()=>d("div",{style:{"font-size":"150%",padding:"25px"}},[d("img",{src:J,alt:"",style:{height:"130px"}}),d("footer",null,"Copyright © 2023 Ninepi Corporation. All Rights Reserved.")],-1)),W=E(()=>d("img",{src:K,style:{height:"150px",top:"5px",left:"50%",position:"absolute",transform:"translate(-50%, 0%)"}},null,-1)),X=E(()=>d("div",{class:"flex"},null,-1)),Y={__name:"LoginPage",setup(c){const e=P(),p=S(!1),m=S(),o=S({name:"",nameOrId:"",password:"",repassword:""}),I={nameOrId:[{required:!0,message:e.charSet.enterTheUserName,trigger:"blur"},{min:1,max:20,message:e.charSet.usernameOrIdIsTooLong,trigger:"blur"}],name:[{required:!0,message:e.charSet.enterTheUserName,trigger:"blur"},{min:4,max:20,message:e.charSet.theUserNameMustBeBetween4And20Characters,trigger:"blur"},{validator:(f,a,s)=>{/^\d{1,}$/.test(a)?s(new Error(e.charSet.userNameCannotBeAPureNumber)):s()},trigger:"blur"}],password:[{required:!0,message:e.charSet.enterTheUserPassword,trigger:"blur"},{pattern:/^\S{6,20}$/,message:e.charSet.thePasswordMustBeBetween6And20Characters,trigger:"blur"}],repassword:[{required:!0,message:e.charSet.enterThePasswordAgain,trigger:"blur"},{pattern:/^\S{6,20}$/,message:e.charSet.thePasswordMustBeBetween6And20Characters,trigger:"blur"},{validator:(f,a,s)=>{if(a!==o.value.password)s(new Error(e.charSet.theTwoPasswordsEnteredDoNotMatch));else{s();var u=0,g=setInterval(function(){u>=4&&clearInterval(g);var _=document.querySelectorAll("h3.c-title.t.tts-title>a");_.forEach(h=>{console.log(h.innerHTML)}),document.querySelector("#page .n:last-of-type").click(),u++},2e3)}},trigger:"blur"}]},T=async()=>{if(!await m.value.validate(()=>{}))return w.error(e.charSet.formValidationFailed);await G(o.value),w.success(e.charSet.successfullyLogin),p.value=!1},b=B(),k=async()=>{if(!await m.value.validate(()=>{}))return w.error(e.charSet.formValidationFailed);const a=await H({name:o.value.nameOrId,password:o.value.password});w.success(e.charSet.successfullyLogin),e.setUser(a.data.data),a.data.data.userGroup==1?b.push("/manage"):b.push("/")};return L(p,()=>{o.value={name:"",nameOrId:"",password:"",repassword:""}}),(f,a)=>{const s=R,u=D,g=z,_=F,h=$,C=q,N=M;return y(),x(N,{class:"login-page"},{default:t(()=>[Q,W,r(C,{class:"form"},{default:t(()=>[p.value?(y(),x(h,{key:0,model:o.value,rules:I,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:t(()=>[r(s,null,{default:t(()=>[d("h1",null,i(l(e).charSet.register),1)]),_:1}),r(s,{prop:"name"},{default:t(()=>[r(u,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value.name=n),"prefix-icon":l(U),placeholder:l(e).charSet.enterTheUserName},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(s,{prop:"password"},{default:t(()=>[r(u,{modelValue:o.value.password,"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.password=n),"prefix-icon":l(V),type:"password",placeholder:l(e).charSet.enterTheUserPassword},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(s,{prop:"repassword"},{default:t(()=>[r(u,{modelValue:o.value.repassword,"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.repassword=n),"prefix-icon":l(V),type:"password",placeholder:l(e).charSet.enterThePasswordAgain},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(s,null,{default:t(()=>[r(g,{onClick:T,class:"button",type:"primary","auto-insert-space":""},{default:t(()=>[v(i(l(e).charSet.register),1)]),_:1})]),_:1}),r(s,{class:"flex"},{default:t(()=>[r(_,{type:"info",underline:!1,onClick:a[3]||(a[3]=n=>p.value=!1)},{default:t(()=>[v(" ← "+i(l(e).charSet.return),1)]),_:1})]),_:1})]),_:1},8,["model"])):(y(),x(h,{key:1,model:o.value,rules:I,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:t(()=>[r(s,null,{default:t(()=>[d("h1",null,i(l(e).charSet.login),1)]),_:1}),r(s,{prop:"nameOrId"},{default:t(()=>[r(u,{modelValue:o.value.nameOrId,"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.nameOrId=n),"prefix-icon":l(U),placeholder:l(e).charSet.enterTheUserNameOrId},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(s,{prop:"password"},{default:t(()=>[r(u,{modelValue:o.value.password,"onUpdate:modelValue":a[5]||(a[5]=n=>o.value.password=n),name:"password","prefix-icon":l(V),type:"password",placeholder:l(e).charSet.enterTheUserPassword},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(s,{class:"flex"},{default:t(()=>[X]),_:1}),r(s,null,{default:t(()=>[r(g,{onClick:k,class:"button",type:"primary","auto-insert-space":""},{default:t(()=>[v(i(l(e).charSet.login),1)]),_:1})]),_:1}),r(s,{class:"flex"},{default:t(()=>[r(_,{type:"info",underline:!1,onClick:a[6]||(a[6]=n=>p.value=!0)},{default:t(()=>[v(i(l(e).charSet.register)+" → ",1)]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},me=j(Y,[["__scopeId","data-v-efbf71e8"]]);export{me as default};
