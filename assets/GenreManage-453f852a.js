import{r as d,u as D,o as S,c as V,b as l,d as t,f as e,g as k,t as v,R as B,l as N,s as M}from"./index-cd727391.js";import{v as P}from"./el-loading-38faf3ac.js";import{E as A,_ as F,a as I,b as U,c as $}from"./el-message-box-eacb9921.js";import"./el-tooltip-1e4c83a7.js";import"./el-popper-fbb9bc05.js";import{E as z}from"./el-scrollbar-0a89105f.js";import{E as L}from"./el-empty-330ccc49.js";import"./el-card-1357ee9d.js";import{E as T}from"./el-button-c450cffe.js";import{Z as O,$ as R}from"./index-5e133581.js";import{b as W,c as Y,g as q,d as Z}from"./genre-c71bbba1.js";import{b as j}from"./format-9da1629e.js";import{E as H,a as J}from"./el-message-dd660b86.js";import{E as K}from"./el-input-36601334.js";import{E as g}from"./request-7dd205cb.js";import"./index-44440405.js";import"./index-87008c54.js";import"./error-f1912ce6.js";import"./_Uint8Array-c8893054.js";import"./_plugin-vue_export-helper-c27b6911.js";const Q={__name:"GenreEdit",emits:["success"],setup(C,{expose:r,emit:f}){const s=d(!1),a=D(),m=d(),o=d({name:"",profile:""}),b={name:[{required:!0,message:a.charSet.enterTheGenreName,trigger:"blur"},{min:1,max:20,message:a.charSet.theGenreNameMustBeBetween1And20Characters,trigger:"blur"}],profile:[{max:2e3,message:a.charSet.notSupportedForOver2000Words,trigger:"blur"}]},y=async()=>{if(!await m.value.validate(()=>{}))return g.error(a.charSet.formValidationFailed);o.value.id?(await W(o.value),g.success(a.charSet.successfullyEdited)):(await Y(o.value),g.success(a.charSet.successfullyAdded)),s.value=!1,f("success")},E=h=>{s.value=!0,o.value={...h}},c=()=>{m.value.clearValidate()};return r({open:E}),(h,n)=>{const i=K,_=H,w=T,x=J,G=z,u=A;return S(),V(u,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=p=>s.value=p),onOpen:c,title:o.value.id?e(a).charSet.editGenre:e(a).charSet.addGenre,direction:"rtl",size:"40%"},{default:l(()=>[t(G,null,{default:l(()=>[t(x,{ref_key:"form",ref:m,model:o.value,rules:b,"label-width":"120px"},{default:l(()=>[t(_,{label:e(a).charSet.genreName+":",prop:"name"},{default:l(()=>[t(i,{modelValue:o.value.name,"onUpdate:modelValue":n[0]||(n[0]=p=>o.value.name=p),placeholder:e(a).charSet.enterTheGenreName},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(_,{label:e(a).charSet.genreProfile+":",prop:"profile"},{default:l(()=>[t(i,{modelValue:o.value.profile,"onUpdate:modelValue":n[1]||(n[1]=p=>o.value.profile=p),placeholder:e(a).charSet.enterTheGenreProfile,type:"textarea",resize:"none",maxlength:"2000","show-word-limit":"",autosize:{minRows:6,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(_,null,{default:l(()=>[t(w,{onClick:y,type:"primary"},{default:l(()=>[k(v(e(a).charSet.ok),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue","title"])}}},X={key:0},be={__name:"GenreManage",setup(C){const r=D(),f=d([]),s=d(!1),a=d(),m=async()=>{s.value=!0;const c=await q();f.value=c.data.data,s.value=!1};m();const o=async c=>{await I.confirm(r.charSet.areYouSureYouWantToDeleteThisGenre,r.charSet.prompt,{type:"warning",confirmButtonText:r.charSet.ok,cancelButtonText:r.charSet.cancel}).then(async()=>{await Z(c.id),g.success(r.charSet.successfullyDeleted),m()}).catch(()=>{})},b=c=>{a.value.open(c)},y=()=>{a.value.open({})},E=()=>{m()};return(c,h)=>{const n=T,i=U,_=L,w=$,x=F,G=P;return S(),V(x,{title:e(r).charSet.genreManage},{extra:l(()=>[t(n,{type:"primary",onClick:y},{default:l(()=>[k(v(e(r).charSet.addGenre),1)]),_:1})]),default:l(()=>[B((S(),V(w,{data:f.value,style:{width:"100%"}},{empty:l(()=>[t(_,{description:e(r).charSet.noData},null,8,["description"])]),default:l(()=>[t(i,{prop:"id",label:"ID",width:"100"}),t(i,{prop:"name",label:e(r).charSet.genreName},null,8,["label"]),t(i,{prop:"profile",label:e(r).charSet.genreProfile},{default:l(({row:u})=>[u.profile?M("",!0):(S(),N("span",X,v(e(r).charSet.noIntroductionProvided),1))]),_:1},8,["label"]),t(i,{label:e(r).charSet.createDate,prop:"createDatetime"},{default:l(({row:u})=>[k(v(e(j)(u.createDatetime)),1)]),_:1},8,["label"]),t(i,{label:e(r).charSet.operate,width:"200"},{default:l(({row:u})=>[t(n,{circle:"",plain:"",icon:e(O),type:"primary",onClick:p=>b(u)},null,8,["icon","onClick"]),t(n,{circle:"",plain:"",icon:e(R),type:"danger",onClick:p=>o(u)},null,8,["icon","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[G,s.value]]),t(Q,{ref_key:"drawer",ref:a,onSuccess:E},null,512)]),_:1},8,["title"])}}};export{be as default};
