import{u as k,r as h,a as B,w as O,o as w,c as v,b as s,d as r,e as i,t as d,f as l,g,p as L,h as A}from"./index-4ba2d79a.js";import{E as M,a as R}from"./el-row-bd0596ad.js";import{E as $,a as q}from"./el-message-7996c4bf.js";import{E as F}from"./el-link-25ff7580.js";import{E as z}from"./el-button-30e4aac0.js";import{E as D}from"./el-input-357e38f4.js";import{u as G,a as j}from"./user-c2d01a4c.js";import{u as U,l as S}from"./index-e8ef4e39.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import{E as _}from"./request-4c50beb0.js";import"./index-42d2b847.js";import"./error-f1912ce6.js";import"./_Uint8Array-e65dad1c.js";import"./index-23229e5d.js";const J="/assets/logo-9501de6f.png";const b=m=>(L("data-v-417795d3"),m=m(),A(),m),K=b(()=>i("div",{style:{"font-size":"150%",padding:"25px"}},[i("img",{src:J,alt:"",style:{height:"130px"}}),i("footer",null,"Copyright © 2023 Ninepi Corporation. All Rights Reserved.")],-1)),Q=b(()=>i("div",{class:"flex"},null,-1)),W={__name:"LoginPage",setup(m){const e=k(),p=h(!1),c=h(),o=h({name:"",nameOrId:"",password:"",repassword:""}),x={nameOrId:[{required:!0,message:e.charSet.enterTheUserName,trigger:"blur"},{min:1,max:20,message:e.charSet.usernameOrIdIsTooLong,trigger:"blur"}],name:[{required:!0,message:e.charSet.enterTheUserName,trigger:"blur"},{min:4,max:20,message:e.charSet.theUserNameMustBeBetween4And20Characters,trigger:"blur"},{validator:(f,a,t)=>{/^\d{1,}$/.test(a)?t(new Error(e.charSet.userNameCannotBeAPureNumber)):t()},trigger:"blur"}],password:[{required:!0,message:e.charSet.enterTheUserPassword,trigger:"blur"},{pattern:/^\S{6,20}$/,message:e.charSet.thePasswordMustBeBetween6And20Characters,trigger:"blur"}],repassword:[{required:!0,message:e.charSet.enterThePasswordAgain,trigger:"blur"},{pattern:/^\S{6,20}$/,message:e.charSet.thePasswordMustBeBetween6And20Characters,trigger:"blur"},{validator:(f,a,t)=>{a!==o.value.password?t(new Error(e.charSet.theTwoPasswordsEnteredDoNotMatch)):t()},trigger:"blur"}]},C=async()=>{if(!await c.value.validate(()=>{}))return _.error(e.charSet.formValidationFailed);await G(o.value),_.success(e.charSet.successfullyLogin),p.value=!1},y=B(),N=async()=>{if(!await c.value.validate(()=>{}))return _.error(e.charSet.formValidationFailed);const a=await j({name:o.value.nameOrId,password:o.value.password});_.success(e.charSet.successfullyLogin),e.setUser(a.data.data),a.data.data.userGroup==1?y.push("/manage"):y.push("/")};return O(p,()=>{o.value={name:"",nameOrId:"",password:"",repassword:""}}),(f,a)=>{const t=$,u=D,V=z,E=F,I=q,P=R,T=M;return w(),v(T,{class:"login-page"},{default:s(()=>[K,r(P,{class:"form"},{default:s(()=>[p.value?(w(),v(I,{key:0,model:o.value,rules:x,ref_key:"form",ref:c,size:"large",autocomplete:"off"},{default:s(()=>[r(t,null,{default:s(()=>[i("h1",null,d(l(e).charSet.register),1)]),_:1}),r(t,{prop:"name"},{default:s(()=>[r(u,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value.name=n),"prefix-icon":l(U),placeholder:l(e).charSet.enterTheUserName},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(t,{prop:"password"},{default:s(()=>[r(u,{modelValue:o.value.password,"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.password=n),"prefix-icon":l(S),type:"password",placeholder:l(e).charSet.enterTheUserPassword},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(t,{prop:"repassword"},{default:s(()=>[r(u,{modelValue:o.value.repassword,"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.repassword=n),"prefix-icon":l(S),type:"password",placeholder:l(e).charSet.enterThePasswordAgain},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(t,null,{default:s(()=>[r(V,{onClick:C,class:"button",type:"primary","auto-insert-space":""},{default:s(()=>[g(d(l(e).charSet.register),1)]),_:1})]),_:1}),r(t,{class:"flex"},{default:s(()=>[r(E,{type:"info",underline:!1,onClick:a[3]||(a[3]=n=>p.value=!1)},{default:s(()=>[g(" ← "+d(l(e).charSet.return),1)]),_:1})]),_:1})]),_:1},8,["model"])):(w(),v(I,{key:1,model:o.value,rules:x,ref_key:"form",ref:c,size:"large",autocomplete:"off"},{default:s(()=>[r(t,null,{default:s(()=>[i("h1",null,d(l(e).charSet.login),1)]),_:1}),r(t,{prop:"nameOrId"},{default:s(()=>[r(u,{modelValue:o.value.nameOrId,"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.nameOrId=n),"prefix-icon":l(U),placeholder:l(e).charSet.enterTheUserNameOrId},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(t,{prop:"password"},{default:s(()=>[r(u,{modelValue:o.value.password,"onUpdate:modelValue":a[5]||(a[5]=n=>o.value.password=n),name:"password","prefix-icon":l(S),type:"password",placeholder:l(e).charSet.enterTheUserPassword},null,8,["modelValue","prefix-icon","placeholder"])]),_:1}),r(t,{class:"flex"},{default:s(()=>[Q]),_:1}),r(t,null,{default:s(()=>[r(V,{onClick:N,class:"button",type:"primary","auto-insert-space":""},{default:s(()=>[g(d(l(e).charSet.login),1)]),_:1})]),_:1}),r(t,{class:"flex"},{default:s(()=>[r(E,{type:"info",underline:!1,onClick:a[6]||(a[6]=n=>p.value=!0)},{default:s(()=>[g(d(l(e).charSet.register)+" → ",1)]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},pe=H(W,[["__scopeId","data-v-417795d3"]]);export{pe as default};
